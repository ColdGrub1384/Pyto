--- !tapi-tbd-v2
archs:                 [ armv7, armv7s, arm64, arm64e ]
platform:              ios
flags:                 [ flat_namespace, not_app_extension_safe ]
install-name:          /System/Library/Frameworks/MetalPerformanceShaders.framework/Frameworks/MPSCore.framework/MPSCore
current-version:       122.0.46
compatibility-version: 1
exports:
  - archs:              [ armv7, armv7s, arm64, arm64e ]
    allowable-clients:  [ MPSImage, MPSMatrix, MPSNDArray, MPSNeuralNetwork, MPSParallelPrimitives, MPSRayIntersector,
                          MetalPerformanceShaders ]
    symbols:            [ _MPSConvertFloatToHalf, _MPSConvertHalfToFloat, _MPSCopyToFromNetworkByteOrder16,
                          _MPSCopyToFromNetworkByteOrder32, _MPSEncodeCopyTexture, _MPSGetEffectiveFeatureChannelsCount,
                          _MPSGetHeapSizeForCommandBuffer, _MPSGetImageType, _MPSGetLinearTextureSize2D,
                          _MPSGetTemporaryBufferFromCommandBufferCache, _MPSGetTemporaryTextureFromCommandBufferCache,
                          _MPSGetvImageFunction, _MPSGetvecLibFunction, _MPSImageBatchIncrementReadCount, _MPSImageBatchIterate,
                          _MPSImageBatchResourceSize, _MPSImageBatchSynchronize, _MPSImageFeatureChannelFormatGetName,
                          _MPSIsTextureTwiddled, _MPSNewBufferForTexture, _MPSRectNoClip, _MPSReturnGetName,
                          _MPSReturnTemporaryBufferToCommandBufferCache, _MPSReturnTemporaryTextureToCommandBufferCache,
                          _MPSSeparatePassDimensions, _MPSSetDeviceOptionsSPI, _MPSStateBatchIncrementReadCount,
                          _MPSStateBatchResourceSize, _MPSStateBatchSynchronize, __Z21MPSDecrementReadCountP17MPSTemporaryImage,
                          __Z21MPSDecrementReadCountP18MPSTemporaryMatrix, __Z21MPSDecrementReadCountP18MPSTemporaryVector,
                          __Z21MPSDecrementReadCountP19MPSTemporaryNDArray, __Z21MPSDecrementReadCountP7NSArrayIP8MPSImageE,
                          __Z21MPSDecrementReadCountP7NSArrayIP8MPSStateE, __Z21MPSDecrementReadCountP8MPSImage,
                          __Z21MPSDecrementReadCountP8MPSState, __Z25MPSGetEffectiveClipRegion7MTLSize9MPSRegion,
                          __Z25MPSGetEffectiveClipRegion7MTLSize9MTLRegion, __ZN10MPSLibrary13ReleaseMPSKeyEP11MPSKey_data,
                          __ZN10MPSLibrary15GetComputeStateEjRK23MPSFunctionConstantList30MPSThreadGroupSizeMultipleType,
                          __ZN10MPSLibrary19CreateUberShaderKeyEP8NSStringRK23MPSFunctionConstantListyPFvPU21objcproto10MTLLibrary11objc_objectPK13MPSKernelInfoS4_U13block_pointerFvPU22objcproto11MTLFunction11objc_objectP7NSErrorEEy30MPSThreadGroupSizeMultipleType24MPSDriverCompilerOptions,
                          __ZN10MPSLibrary19ReleaseComputeStateEPU34objcproto23MTLComputePipelineState11objc_object,
                          __ZN10MPSLibrary20GetComputeStateAsyncEjRK23MPSFunctionConstantList30MPSThreadGroupSizeMultipleType,
                          __ZN10MPSLibrary20PrefetchComputeStateEjRK23MPSFunctionConstantList30MPSThreadGroupSizeMultipleType,
                          __ZN10MPSLibrary23NewComputePipelineStateEP8NSStringP25MTLFunctionConstantValues30MPSThreadGroupSizeMultipleType,
                          __ZN10MPSLibrary25GetPipelineStateForMPSKeyEP11MPSKey_dataPU27objcproto16MTLCommandBuffer11objc_object,
                          __ZN10MPSLibraryD1Ev, __ZN10MPSLibraryD2Ev, __ZN12MPSAutoCache13GetTempBufferEmP15MTLSizeAndAlign,
                          __ZN12MPSAutoCache14GetTempTextureEPK12MPSPixelInfoPK7MTLSizeP20MTLTextureDescriptorbP19TextureSizeAndAlign,
                          __ZN12MPSAutoCache15WarmAllocationsEPU27objcproto16MTLCommandBuffer11objc_objectmm,
                          __ZN12MPSAutoCache15WarmAllocationsEPU27objcproto16MTLCommandBuffer11objc_objectmmm,
                          __ZN12MPSAutoCache16PrefetchHeapSizeEPU27objcproto16MTLCommandBuffer11objc_objectm,
                          __ZN12MPSAutoCache19ReleaseTempResourceEPU22objcproto11MTLResource11objc_object,
                          __ZN12MPSAutoCache20SetHeapCacheDurationEPU27objcproto16MTLCommandBuffer11objc_objectd,
                          __ZN12MPSAutoCache24GetCompressedTempTextureEPK12MPSPixelInfoPK7MTLSizeP20MTLTextureDescriptorbP19TextureSizeAndAlign,
                          __ZN12MPSAutoCache30UserCacheFrameForCommandBufferEPU27objcproto16MTLCommandBuffer11objc_object,
                          __ZN12MPSAutoCacheC1EPU27objcproto16MTLCommandBuffer11objc_objectPU21objcproto10MTLTexture11objc_object,
                          __ZN12MPSAutoCacheC2EPU27objcproto16MTLCommandBuffer11objc_objectPU21objcproto10MTLTexture11objc_object,
                          __ZN12MPSAutoCacheD1Ev, __ZN12MPSAutoCacheD2Ev, __ZN13MPSAutoBuffer14AllocateBufferEP8NSString,
                          __ZN13MPSAutoBuffer14InitWithBufferEPU19objcproto9MTLBuffer11objc_object,
                          __ZN13MPSAutoBuffer22ReleaseTemporaryBufferEv, __ZN13MPSAutoBuffer23GetResourceSize_PrivateEv,
                          __ZN13MPSAutoBuffer23InitDeferredUsingDeviceEmPU19objcproto9MTLDevice11objc_object,
                          __ZN13MPSAutoBuffer29InitDeferredUsingTextureCacheEmPU27objcproto16MTLCommandBuffer11objc_object,
                          __ZN13MPSAutoBufferD1Ev, __ZN13MPSAutoBufferD2Ev, __ZN14MPSAutoTexture15AllocateTextureEP8NSString,
                          __ZN14MPSAutoTexture15InitWithTextureEPU21objcproto10MTLTexture11objc_object28MPSImageFeatureChannelFormat,
                          __ZN14MPSAutoTexture23GetResourceSize_PrivateEPm,
                          __ZN14MPSAutoTexture23InitDeferredUsingDeviceEP20MTLTextureDescriptorP9MPSDevice28MPSImageFeatureChannelFormatb,
                          __ZN14MPSAutoTexture23ReleaseTemporaryTextureEv,
                          __ZN14MPSAutoTexture29InitDeferredUsingTextureCacheEP20MTLTextureDescriptorPU27objcproto16MTLCommandBuffer11objc_object28MPSImageFeatureChannelFormatb,
                          __ZN14MPSAutoTextureD1Ev, __ZN14MPSAutoTextureD2Ev,
                          __ZN15MPSDevice_MacOS10AddKernelsEPK14MPSLibraryInfoP10MPSLibrary,
                          __ZN9MPSDevice10GetSamplerE16MPSImageEdgeMode21MPSFilterSamplingMode23MPSFilterCoordinateMode,
                          __ZN9MPSDevice11DeleteQueueEPU26objcproto15MTLCommandQueue11objc_object,
                          __ZN9MPSDevice12GetHeapBlockEm, __ZN9MPSDevice12GetMPSDeviceEPU19objcproto9MTLDevice11objc_object,
                          __ZN9MPSDevice12GetPixelInfoE14MTLPixelFormat28MPSImageFeatureChannelFormat,
                          __ZN9MPSDevice15ReturnHeapBlockEP11objc_objecty, __ZN9MPSDevice19ExerciseLibraryListEv,
                          __ZN9MPSDevice22GetMPSLibrary_DoNotUseEPK14MPSLibraryInfo, __ZN9MPSDevice8GetQueueEv,
                          __ZN9MPSDeviceC2EPU19objcproto9MTLDevice11objc_object, __ZN9MPSDeviceD0Ev, __ZN9MPSDeviceD1Ev,
                          __ZN9MPSDeviceD2Ev, __ZNK13MPSAutoBuffer5PrintEv, _kMPSEmptyLibraryInfo ]
    objc-classes:       [ _MPSCommandBuffer, _MPSExternalPluginBase, _MPSImage, _MPSImageDescriptor, _MPSKernel,
                          _MPSKeyedUnarchiver, _MPSMatrix, _MPSMatrixDescriptor, _MPSNDArray, _MPSNDArrayDescriptor,
                          _MPSParallelExclusiveScan, _MPSParallelInclusiveScan, _MPSParallelRadixSort, _MPSParallelRandom,
                          _MPSParallelRandomDistributionDescriptor, _MPSParallelRandomMTGP32, _MPSParallelRandomPhilox,
                          _MPSParallelReduceArgMax, _MPSParallelReduceArgMin, _MPSParallelReduceMax, _MPSParallelReduceMin,
                          _MPSParallelReduceSum, _MPSPredicate, _MPSPredicatedCommandEncoder, _MPSState, _MPSStateResourceList,
                          _MPSTemporaryImage, _MPSTemporaryMatrix, _MPSTemporaryNDArray, _MPSTemporaryVector, _MPSVector,
                          _MPSVectorDescriptor, _MPSVirtualImage ]
    objc-ivars:         [ _MPSExternalPluginBase._self, _MPSImage._device, _MPSImage._featureChannelFormat,
                          _MPSImage._featureChannels, _MPSImage._featureChannelsLayout, _MPSImage._height,
                          _MPSImage._numberOfImages, _MPSImage._pixelInfo, _MPSImage._texture, _MPSImage._textureType,
                          _MPSImage._width, _MPSImageDescriptor._featureChannels, _MPSImageDescriptor._height,
                          _MPSImageDescriptor._width, _MPSKernel._allowedOptions, _MPSKernel._device,
                          _MPSKernel._enableConcurrency, _MPSKernel._fileVersion, _MPSKernel._label, _MPSKernel._library,
                          _MPSKernel._options, _MPSKernel._privateOptions, _MPSMatrix._buffer, _MPSMatrix._columns,
                          _MPSMatrix._dataType, _MPSMatrix._matrixBytes, _MPSMatrix._offset, _MPSMatrix._rowBytes,
                          _MPSMatrix._rows, _MPSNDArray._dataType, _MPSNDArray._dimensionLengths, _MPSNDArray._dimensionOrder,
                          _MPSNDArray._numberOfDimensions, _MPSNDArray._rowBytes, _MPSNDArray._sliceLengths,
                          _MPSNDArray._sliceOffsets, _MPSNDArrayDescriptor._dimensionOrder,
                          _MPSParallelRandomMTGP32._bernoulliParameter, _MPSParallelRandomPhilox._bernoulliParameter,
                          _MPSState._flags, _MPSState._readCount, _MPSState._resourceCount, _MPSState._resources,
                          _MPSTemporaryImage._readCount, _MPSVector._buffer, _MPSVector._offset ]
...
