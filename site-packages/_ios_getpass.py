if __host__ is widget:
    raise ImportError("Cannot ask for input from a widget")

import sys

from pyto import PyInputHelper
from console import ignoredThreads
from rubicon.objc import *
import threading

def getpass(prompt="", stream=sys.stdout):
    if __host__ is widget:
        return None
    
    NSBundle = ObjCClass("NSBundle")
    if NSBundle.mainBundle.bundlePath.pathExtension == "appex":
        return None
    
    PyInputHelper.userInput = None
    
    PyInputHelper.getPassWithPrompt(prompt)
    
    while PyInputHelper.userInput == None or threading.currentThread() in ignoredThreads:
        continue
    
    userInput = PyInputHelper.userInput
    PyInputHelper.userInput = None
    
    return str(userInput)
